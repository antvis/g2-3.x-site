{"componentChunkName":"component---node-modules-antv-gatsby-theme-antv-0-10-32-antv-gatsby-theme-antv-site-templates-document-tsx","path":"/en/docs/manual/tutorial/shape","result":{"data":{"site":{"siteMetadata":{"title":"G2","githubUrl":"https://github.com/antvis/g2","docs":[{"slug":"manual/getting-started","title":{"zh":"快速开始","en":"Getting Started"},"order":0},{"slug":"manual/tutorial","title":{"zh":"使用教程","en":"Tutorial"},"order":1},{"slug":"manual/advanced","title":{"zh":"高级教程","en":"Advanced"},"order":2},{"slug":"manual/faq","title":{"zh":"G2 常见问题","en":"FAQ"},"order":3}]},"pathPrefix":""},"markdownRemark":{"html":"<p>自 G2 2.0.x 版本开始我们添加了自定义 Shape 的机制，以支持部分有 <strong>高订制需求的</strong> 图表可视化需求。这也是 G2 在向 <strong>可编程可视化引擎</strong> 迈出的重要一步。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> Shape <span class=\"token operator\">=</span> <span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Shape<span class=\"token punctuation\">;</span>\nShape<span class=\"token punctuation\">.</span><span class=\"token function\">registerShape</span><span class=\"token punctuation\">(</span>geomName<span class=\"token punctuation\">,</span> shapeName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 向Shape工厂注册某个geom的一个shape</span>\n  <span class=\"token function\">getPoints</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 自定义具体标记点</span>\n  <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg<span class=\"token punctuation\">,</span> container</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// 自定义最终绘制</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>上述 7 行的代码片段即使自定义 Shape 的所有接口。</p>\n<ul>\n<li>geomName <a href=\"/zh/docs/api/geometry\">几何标记</a>名, 如 point, line 等</li>\n<li>shapeName 注册的具体图形名，自定义的图形的名称</li>\n<li>getPoints 自定义形状绘制时需要的节点，比如柱状图需要 4 个节点</li>\n<li>draw 执行图形绘制逻辑、调用绘图引擎</li>\n</ul>\n<p>上述方法更详细的使用说明详见： <a href=\"/zh/docs/api/shape\">Shape API</a>。</p>\n<h2 id=\"1-分钟上手自定义-shape\"><a href=\"#1-%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%E8%87%AA%E5%AE%9A%E4%B9%89-shape\" aria-label=\"1 分钟上手自定义 shape permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 分钟上手自定义 Shape</h2>\n<p>以<a href=\"/zh/examples/column/basic\">柱状图</a>举例，几何标记 interval 会给出四个关键点（即组成矩形的四个顶点），然后将这四个点依次连接，得到每个柱子的形状。<strong>红色圆形</strong> 标记就是几何标记点。默认的柱状图就是通过四个几何标记点，依次相连后得到的。</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*MHASTo6s90oAAAAAAAAAAABkARQnAQ\"></p>\n<p>下面的我们使用自定义 shape 的功能，把上面的柱状图的柱子变成三角形，即如下图所示：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*8MCIS7hehZsAAAAAAAAAAABkARQnAQ\"></p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*GHN3SY_oYXgAAAAAAAAAAABkARQnAQ\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Shape <span class=\"token operator\">=</span> <span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Shape<span class=\"token punctuation\">;</span>\nShape<span class=\"token punctuation\">.</span><span class=\"token function\">registerShape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'interval'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'triangle'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getPoints</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> y0 <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">-</span> width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y0 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">+</span> width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y0 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg<span class=\"token punctuation\">,</span> group</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 自定义最终绘制</span>\n    <span class=\"token keyword\">const</span> points <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">parsePoints</span><span class=\"token punctuation\">(</span>cfg<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 将0-1空间的坐标转换为画布坐标</span>\n    <span class=\"token keyword\">const</span> polygon <span class=\"token operator\">=</span> group<span class=\"token punctuation\">.</span><span class=\"token function\">addShape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'polygon'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      attrs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        points<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">[</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">[</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">[</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        fill<span class=\"token punctuation\">:</span> cfg<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> polygon<span class=\"token punctuation\">;</span> <span class=\"token comment\">// !必须返回 shape</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Sports'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">27500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Strategy'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">11500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Action'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">6000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Shooter'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">3500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Other'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">1500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">95</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'genre*sold'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'genre'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'triangle'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>以下是自定义三角形柱状图的代码：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Shape<span class=\"token punctuation\">.</span><span class=\"token function\">registerShape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'interval'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'triangle'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 返回三角形的三个顶点</span>\n  <span class=\"token function\">getPoints</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> y0 <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>y0<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> cfg<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">-</span> width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y0 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">+</span> width <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> y0 <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 绘制三角形</span>\n  <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cfg<span class=\"token punctuation\">,</span> group</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 自定义最终绘制</span>\n    <span class=\"token keyword\">const</span> points <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">parsePoints</span><span class=\"token punctuation\">(</span>cfg<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 将0-1空间的坐标转换为画布坐标</span>\n    <span class=\"token keyword\">const</span> polygon <span class=\"token operator\">=</span> group<span class=\"token punctuation\">.</span><span class=\"token function\">addShape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'polygon'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      attrs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        points<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">[</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">[</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">[</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        fill<span class=\"token punctuation\">:</span> cfg<span class=\"token punctuation\">.</span>color\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> polygon<span class=\"token punctuation\">;</span> <span class=\"token comment\">// !必须返回 shape</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>上面代码中，我们进行了三步操作：</p>\n<ol>\n<li>通过 <code class=\"language-text\">getPoints()</code>  方法返回三角形的三个关键点（即三个顶点）。此时 cfg 中会传入，x, y, y0, size。其中 x, y 是柱子最高点的坐标，y0 是横坐标轴的 y 坐标，size 是柱子默认宽度。</li>\n<li>得到标记点后，我们在 <code class=\"language-text\">draw()</code> 方法中拿到 cfg.points 数据和数据映射后的图形属性数据（比如 cfg.color），再通过绘图库提供的多边形图形，将三个点依次头尾相连，生成每个三角形。</li>\n<li>\n<p>通过 addShap 来绘制图形，addShape 的参数参考： <a href=\"https://github.com/antvis/g\" target=\"_self\" rel=\"nofollow\">绘图文档</a></p>\n<blockquote>\n<p>注意：points 数据和参与 points 计算的配置项都是 0-1 空间的数据！</p>\n</blockquote>\n</li>\n</ol>","tableOfContents":"<ul>\n<li><a href=\"/en/docs/manual/tutorial/shape/#1-%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%E8%87%AA%E5%AE%9A%E4%B9%89-shape\">1 分钟上手自定义 Shape</a></li>\n</ul>","fields":{"slug":"/en/docs/manual/tutorial/shape","readingTime":{"text":"2 min read","time":108000}},"frontmatter":{"title":"自定义 Shape"},"parent":{"relativePath":"manual/tutorial/shape.en.md"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/en/examples/gallery"},"frontmatter":{"title":"Gallery","order":-1}}},{"node":{"fields":{"slug":"/zh/examples/gallery"},"frontmatter":{"title":"所有图表","order":-1}}},{"node":{"fields":{"slug":"/zh/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/en/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/zh/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/en/examples/relation/relation"},"frontmatter":{"title":"Graph","order":0}}},{"node":{"fields":{"slug":"/en/examples/radar/radar"},"frontmatter":{"title":"Radar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/radar/radar"},"frontmatter":{"title":"雷达图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/relation/relation"},"frontmatter":{"title":"关系图","order":0}}},{"node":{"fields":{"slug":"/en/examples/point/scatter"},"frontmatter":{"title":"Scatter Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/point/scatter"},"frontmatter":{"title":"散点图","order":0}}},{"node":{"fields":{"slug":"/en/examples/other/other"},"frontmatter":{"title":"Others","order":0}}},{"node":{"fields":{"slug":"/zh/examples/other/other"},"frontmatter":{"title":"其他图表","order":0}}},{"node":{"fields":{"slug":"/en/examples/pie/basic"},"frontmatter":{"title":"Basic Pie Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/pie/basic"},"frontmatter":{"title":"基础饼图","order":0}}},{"node":{"fields":{"slug":"/en/examples/map/map"},"frontmatter":{"title":"Map","order":0}}},{"node":{"fields":{"slug":"/zh/examples/map/map"},"frontmatter":{"title":"地图","order":0}}},{"node":{"fields":{"slug":"/en/examples/line/basic"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/line/basic"},"frontmatter":{"title":"基础折线图","order":0}}},{"node":{"fields":{"slug":"/en/examples/heatmap/heatmap"},"frontmatter":{"title":"Heatmap","order":0}}},{"node":{"fields":{"slug":"/zh/examples/heatmap/heatmap"},"frontmatter":{"title":"热力图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gauge/gauge"},"frontmatter":{"title":"仪表盘","order":0}}},{"node":{"fields":{"slug":"/en/examples/gauge/gauge"},"frontmatter":{"title":"Gauge","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gallery/line"},"frontmatter":{"title":"折线图","order":0}}},{"node":{"fields":{"slug":"/en/examples/gallery/line"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/funnel/funnel"},"frontmatter":{"title":"Funnel Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/funnel/funnel"},"frontmatter":{"title":"漏斗图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/facet/facet"},"frontmatter":{"title":"分面","order":0}}},{"node":{"fields":{"slug":"/en/examples/component/component"},"frontmatter":{"title":"Chart Components","order":0}}},{"node":{"fields":{"slug":"/zh/examples/component/component"},"frontmatter":{"title":"图表组件","order":0}}},{"node":{"fields":{"slug":"/en/examples/candlestick/candlestick"},"frontmatter":{"title":"K Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/candlestick/candlestick"},"frontmatter":{"title":"烛形图","order":0}}},{"node":{"fields":{"slug":"/en/examples/column/basic"},"frontmatter":{"title":"Basic Column Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/column/basic"},"frontmatter":{"title":"基础柱状图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/box/box"},"frontmatter":{"title":"箱型图","order":0}}},{"node":{"fields":{"slug":"/en/examples/facet/facet"},"frontmatter":{"title":"Facet","order":0}}},{"node":{"fields":{"slug":"/en/examples/area/basic"},"frontmatter":{"title":"Area Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/box/box"},"frontmatter":{"title":"Box Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/area/basic"},"frontmatter":{"title":"面积图","order":0}}},{"node":{"fields":{"slug":"/en/examples/bar/basic"},"frontmatter":{"title":"Basic Bar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/bar/basic"},"frontmatter":{"title":"基础条形图","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/zh/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/en/examples/pie/donut"},"frontmatter":{"title":"Donut Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/pie/donut"},"frontmatter":{"title":"环图","order":1}}},{"node":{"fields":{"slug":"/en/examples/line/double"},"frontmatter":{"title":"Double Line Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/line/double"},"frontmatter":{"title":"双折线图","order":1}}},{"node":{"fields":{"slug":"/en/examples/gallery/column"},"frontmatter":{"title":"Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/gallery/column"},"frontmatter":{"title":"柱状图","order":1}}},{"node":{"fields":{"slug":"/en/examples/column/dodge"},"frontmatter":{"title":"Grouped Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/column/dodge"},"frontmatter":{"title":"分组柱状图","order":1}}},{"node":{"fields":{"slug":"/en/examples/bar/dodge"},"frontmatter":{"title":"Grouped Bar Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/bar/dodge"},"frontmatter":{"title":"分组条形图","order":1}}},{"node":{"fields":{"slug":"/zh/examples/area/stacked"},"frontmatter":{"title":"堆叠面积图","order":1}}},{"node":{"fields":{"slug":"/en/examples/area/stacked"},"frontmatter":{"title":"Stacked Area Chart","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/zh/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/en/examples/pie/rose"},"frontmatter":{"title":"Nightingale Rose Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/pie/rose"},"frontmatter":{"title":"南丁格尔玫瑰图","order":2}}},{"node":{"fields":{"slug":"/en/examples/line/multiple"},"frontmatter":{"title":"multiple line chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/line/multiple"},"frontmatter":{"title":"多折线图","order":2}}},{"node":{"fields":{"slug":"/en/examples/gallery/bar"},"frontmatter":{"title":"Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/gallery/bar"},"frontmatter":{"title":"条形图","order":2}}},{"node":{"fields":{"slug":"/en/examples/column/stack"},"frontmatter":{"title":"Stacked Column Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/column/stack"},"frontmatter":{"title":"堆叠柱状图","order":2}}},{"node":{"fields":{"slug":"/en/examples/bar/stack"},"frontmatter":{"title":"Stacked Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/bar/stack"},"frontmatter":{"title":"堆叠条形图","order":2}}},{"node":{"fields":{"slug":"/zh/examples/area/range"},"frontmatter":{"title":"区间面积图","order":2}}},{"node":{"fields":{"slug":"/en/examples/area/range"},"frontmatter":{"title":"Range Area Chart","order":2}}},{"node":{"fields":{"slug":"/en/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/zh/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/en/examples/pie/nested"},"frontmatter":{"title":"Nested Pie Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/pie/nested"},"frontmatter":{"title":"嵌套饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/line/step"},"frontmatter":{"title":"Step Line Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/line/step"},"frontmatter":{"title":"阶梯折线图","order":3}}},{"node":{"fields":{"slug":"/en/examples/gallery/pie"},"frontmatter":{"title":"Pie Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/gallery/pie"},"frontmatter":{"title":"饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/column/histogram"},"frontmatter":{"title":"Histogram","order":3}}},{"node":{"fields":{"slug":"/zh/examples/column/histogram"},"frontmatter":{"title":"直方图","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/en/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/zh/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/examples/gallery/area"},"frontmatter":{"title":"Area Chart","order":4}}},{"node":{"fields":{"slug":"/zh/examples/gallery/area"},"frontmatter":{"title":"面积图","order":4}}},{"node":{"fields":{"slug":"/en/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/zh/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/en/examples/gallery/gauge"},"frontmatter":{"title":"Gauge","order":5}}},{"node":{"fields":{"slug":"/zh/examples/gallery/gauge"},"frontmatter":{"title":"仪表盘","order":5}}},{"node":{"fields":{"slug":"/en/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/zh/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/en/examples/gallery/facet"},"frontmatter":{"title":"Facet","order":6}}},{"node":{"fields":{"slug":"/zh/examples/gallery/facet"},"frontmatter":{"title":"分面","order":6}}},{"node":{"fields":{"slug":"/zh/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/en/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/zh/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/en/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/en/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/zh/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/en/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/zh/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/en/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/zh/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/en/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/zh/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/en/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/zh/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/zh/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/en/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/zh/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/en/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}}]}},"pageContext":{"prev":{"node":{"fields":{"slug":"/en/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19},"html":"<p>很多场景下图表的数据源是需要异步加载获取的，在 G2 中实现异步数据的更新也是非常的简单，你只需要通过 jquery 等工具异步获取数据后，按照正常的创建图表步骤绘制即可。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">$<span class=\"token punctuation\">.</span><span class=\"token function\">getJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data.json'</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n    width<span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span> <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">point</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'z'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"空数据源图表绘制\"><a href=\"#%E7%A9%BA%E6%95%B0%E6%8D%AE%E6%BA%90%E5%9B%BE%E8%A1%A8%E7%BB%98%E5%88%B6\" aria-label=\"空数据源图表绘制 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>空数据源图表绘制</h2>\n<p>有时候我们需要先绘制图表，然后再加载完整的数据，即刚开始的时候数据源是个空的。如下例：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 数据将会包含 genre 和 sold 字段</span>\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 指定图表容器 ID</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'genre*sold'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'genre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*ObsiTa_A_qcAAAAAAAAAAABkARQnAQ\"></p>\n<p>当数据加载进来之后，再调用 chart.changeData(data); 即可绘制。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> newData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Sports'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">275</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Strategy'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">115</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Action'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">120</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Shooter'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">350</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> genre<span class=\"token punctuation\">:</span> <span class=\"token string\">'Other'</span><span class=\"token punctuation\">,</span> sold<span class=\"token punctuation\">:</span> <span class=\"token number\">150</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">changeData</span><span class=\"token punctuation\">(</span>newData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用 setTimeout 动态模拟下</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*fQe3S7XnzUEAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h2 id=\"动态更新数据-chartchangedatadata\"><a href=\"#%E5%8A%A8%E6%80%81%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-chartchangedatadata\" aria-label=\"动态更新数据 chartchangedatadata permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>动态更新数据 chart.changeData(data)</h2>\n<p><strong>注意</strong></p>\n<p>需要说明的是，chart.changeData(data) 方法 <strong>只支持具备相同数据结构的数据</strong> 进行更新，因为不同的数据结构包含的属性不同，原先声明的图形绘制语法是不能生效做到一一映射的。</p>\n<p>下面的例子展示了初始数据为空以及动态更新数据的例子：</p>\n<ul>\n<li>数据源定时载入的时候调用 <code class=\"language-text\">chart.changeData(data)</code> 方法实时更新即可，非常简单。</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*T7zJTbgwcF4AAAAAAAAAAABkARQnAQ\"></p>\n<p>完整代码如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 模拟数据</span>\n<span class=\"token keyword\">const</span> base <span class=\"token operator\">=</span> <span class=\"token operator\">+</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token number\">2014</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> oneDay <span class=\"token operator\">=</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">3600</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> values <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">150</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>base<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shift</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  now <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>now<span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">getMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> now<span class=\"token punctuation\">.</span><span class=\"token function\">getDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  item<span class=\"token punctuation\">.</span>date <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n  item<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">+</span> values<span class=\"token punctuation\">[</span>values<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  values<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>now<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> oneDay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 创建图表</span>\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c3'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 宽度自适应</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n  animate<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 声明字段度量类型</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">tooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  crosshairs<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token punctuation\">:</span> <span class=\"token string\">'line'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'date*value'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#f80'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'date*value'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#f80'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> init <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 第一次载入数据</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    init <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">addData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">changeData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 动态更新数据</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">700</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"使用-dataset-的状态量\"><a href=\"#%E4%BD%BF%E7%94%A8-dataset-%E7%9A%84%E7%8A%B6%E6%80%81%E9%87%8F\" aria-label=\"使用 dataset 的状态量 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用 DataSet 的状态量</h2>\n<p>使用 DataSet 的状态量也可以动态的进行图表的更新、联动，查看 <a href=\"/zh/docs/api/data-set\">DataSet 章节</a></p>"}},"next":{"node":{"fields":{"slug":"/en/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21},"html":"<p>在 G2 内部，我们默认为一些场景内置了动画，包括入场、更新、出场动画等。同时，我们还提供了自定义动画的机制，以满足更广泛的需求，让用户能更系统、更全面的控制 G2 的动画。</p>\n<ul>\n<li>动画注册 Animate.registAnimation()</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Animate <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token constant\">G2</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/**\n * @param  {String} animationType      动画场景类型 appear enter leave update\n * @param  {String} 动画名称，用户自定义即可\n * @param  {Function} 动画执行函数\n **/</span>\nAnimate<span class=\"token punctuation\">.</span><span class=\"token function\">registerAnimation</span><span class=\"token punctuation\">(</span>animationType<span class=\"token punctuation\">,</span> animationName<span class=\"token punctuation\">,</span> animationFun<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>动画配置 geom.animate()</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  enter<span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span>\n    animation<span class=\"token punctuation\">:</span> <span class=\"token string\">'fadeIn'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 动画名称</span>\n    easing<span class=\"token punctuation\">:</span> <span class=\"token string\">'easeQuartIn'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 动画缓动效果</span>\n    delay<span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 动画延迟执行时间</span>\n    duration<span class=\"token punctuation\">:</span> <span class=\"token number\">600</span> <span class=\"token comment\">// 动画执行时间</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>在 G2 中，我们提供了四种动画场景类型：</p>\n<ul>\n<li>appear: 初始化时的入场动画；</li>\n<li>enter: 更新时的出现动画；</li>\n<li>update: 更新时的变化动画；</li>\n<li>leave: 更新时的动画；</li>\n</ul>\n<p>上述方法更详细的使用说明详见： <a href=\"/zh/docs/api/animate\">G2 Animate API</a>。</p>\n<h2 id=\"1-分钟上手自定义动画\"><a href=\"#1-%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E7%94%BB\" aria-label=\"1 分钟上手自定义动画 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 分钟上手自定义动画</h2>\n<p>以柱状图为例：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*OHrfTrtNTp0AAAAAAAAAAABkARQnAQ\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Animate <span class=\"token operator\">=</span> <span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Animate<span class=\"token punctuation\">;</span>\nAnimate<span class=\"token punctuation\">.</span><span class=\"token function\">registerAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'appear'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'delayScaleInY'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">shape<span class=\"token punctuation\">,</span>\n  animateCfg<span class=\"token punctuation\">,</span></span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">getBBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子包围盒</span>\n  <span class=\"token keyword\">const</span> origin <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'origin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子原始数据</span>\n  <span class=\"token keyword\">const</span> points <span class=\"token operator\">=</span> origin<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子顶点</span>\n  <span class=\"token comment\">// 计算柱子的变换中点</span>\n  <span class=\"token keyword\">const</span> centerX <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>box<span class=\"token punctuation\">.</span>minX <span class=\"token operator\">+</span> box<span class=\"token punctuation\">.</span>maxX<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> centerY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 当顶点在零点之下</span>\n    centerY <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span>maxY<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    centerY <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span>minY<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 设置初始态</span>\n  shape<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerX<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">'s'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> centerX<span class=\"token punctuation\">,</span> centerY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> delay <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Util<span class=\"token punctuation\">.</span><span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    delay <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">let</span> easing <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span>easing<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Util<span class=\"token punctuation\">.</span><span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>easing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    easing <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span><span class=\"token function\">easing</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 设置动画目标态</span>\n  shape<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      transform<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerX<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'s'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> centerX<span class=\"token punctuation\">,</span> centerY<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    animateCfg<span class=\"token punctuation\">.</span>duration<span class=\"token punctuation\">,</span>\n    easing<span class=\"token punctuation\">,</span>\n    animateCfg<span class=\"token punctuation\">.</span>callback<span class=\"token punctuation\">,</span>\n    delay<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    x<span class=\"token punctuation\">:</span> i<span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">/</span> <span class=\"token number\">5</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> i <span class=\"token operator\">/</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  container<span class=\"token punctuation\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token punctuation\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">axis</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">legend</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart\n  <span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#4a657a-#308e92-#b1cfa5-#f5d69f-#f5898b-#ef5055'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    appear<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      animation<span class=\"token punctuation\">:</span> <span class=\"token string\">'delayScaleInY'</span><span class=\"token punctuation\">,</span>\n      easing<span class=\"token punctuation\">:</span> <span class=\"token string\">'easeElasticOut'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">delay</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> index <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button#refresh'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart\n    <span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#4a657a-#308e92-#b1cfa5-#f5d69f-#f5898b-#ef5055'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      appear<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        animation<span class=\"token punctuation\">:</span> <span class=\"token string\">'delayScaleInY'</span><span class=\"token punctuation\">,</span>\n        easing<span class=\"token punctuation\">:</span> <span class=\"token string\">'easeElasticOut'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">delay</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> index <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h3 id=\"第一步：获取-animate-对象\"><a href=\"#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96-animate-%E5%AF%B9%E8%B1%A1\" aria-label=\"第一步：获取 animate 对象 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第一步：获取 Animate 对象</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> Animate <span class=\"token operator\">=</span> <span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Animate<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"第二步：自定义动画（核心）\"><a href=\"#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%A8%E7%94%BB%EF%BC%88%E6%A0%B8%E5%BF%83%EF%BC%89\" aria-label=\"第二步：自定义动画（核心） permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第二步：自定义动画（核心）</h3>\n<p>自定义动画的核心在于：</p>\n<ul>\n<li>设置图形的初始状态</li>\n<li>确定图形的结束状态</li>\n<li>调用动画函数</li>\n</ul>\n<p>这里以定义一个柱状图的动画示例：</p>\n<ol>\n<li>首先获取每根柱子的包围盒。包围盒的意思是能包围图形的最小矩形，所以包围盒含有 minX、minY、maxX、maxY 四个属性，这四个参数限定的区间即为图形的包围盒。</li>\n<li>计算变换中点。当顶点在零点之上时，延 Y 轴正向放大，所以变换的中点在包围盒底部中间；当顶点在零点之下时，延 Y 轴反向放大。所以变换的中点在包围盒顶部中间。</li>\n<li>设置动画初始状态。要实现柱子的放大，需要先将柱子缩到最小。为 shape 设置 transform 属性，先将坐标系的原点移到变换中点，然后将柱子的 y 值缩小到 0.1 倍，最后将坐标系的原点移到原处。</li>\n<li>实现延迟放大效果的动画。调用 shape 的 animate() 方法，传入变换的结束状态、动画时间和缓动函数。结束状态中可以配置延迟参数 delay ，给每个 shape 的动画添加一个跟序号成正比的延迟，即可实现依次放大的效果。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// shape 是柱子对象，animateCfg 是动画配置</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">animateFun</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">shape<span class=\"token punctuation\">,</span> animateCfg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">getBBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子包围盒</span>\n  <span class=\"token keyword\">const</span> origin <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'origin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子原始数据</span>\n  <span class=\"token keyword\">const</span> points <span class=\"token operator\">=</span> origin<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取柱子顶点</span>\n  <span class=\"token comment\">// 计算柱子的变换中点</span>\n  <span class=\"token keyword\">const</span> centerX <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>box<span class=\"token punctuation\">.</span>minX <span class=\"token operator\">+</span> box<span class=\"token punctuation\">.</span>maxX<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> centerY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 当顶点在零点之下</span>\n    centerY <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span>maxY<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    centerY <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span>minY<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 设置初始态</span>\n  shape<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transform'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span> <span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerX<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerY <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span> <span class=\"token string\">'s'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span> <span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> centerX<span class=\"token punctuation\">,</span> centerY <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> shape<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> delay <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span>delay<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Util<span class=\"token punctuation\">.</span><span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    delay <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span><span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">let</span> easing <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span>easing<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">G2</span><span class=\"token punctuation\">.</span>Util<span class=\"token punctuation\">.</span><span class=\"token function\">isFunction</span><span class=\"token punctuation\">(</span>easing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    easing <span class=\"token operator\">=</span> animateCfg<span class=\"token punctuation\">.</span><span class=\"token function\">easing</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 设置动画目标态</span>\n  shape<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    transform<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span> <span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerX<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>centerY <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span> <span class=\"token string\">'s'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span> <span class=\"token string\">'t'</span><span class=\"token punctuation\">,</span> centerX<span class=\"token punctuation\">,</span> centerY <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> animateCfg<span class=\"token punctuation\">.</span>duration<span class=\"token punctuation\">,</span> easing<span class=\"token punctuation\">,</span> animateCfg<span class=\"token punctuation\">.</span>callback<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"第三步：注册动画\"><a href=\"#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%B3%A8%E5%86%8C%E5%8A%A8%E7%94%BB\" aria-label=\"第三步：注册动画 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第三步：注册动画</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Animate<span class=\"token punctuation\">.</span><span class=\"token function\">registerAnimation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'appear'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'delayScaleInY'</span><span class=\"token punctuation\">,</span> animateFun<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"第四步：绘制柱状图，配置动画参数\"><a href=\"#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E7%BB%98%E5%88%B6%E6%9F%B1%E7%8A%B6%E5%9B%BE%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%E5%8F%82%E6%95%B0\" aria-label=\"第四步：绘制柱状图，配置动画参数 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第四步：绘制柱状图，配置动画参数</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'y'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'#4a657a-#308e92-#b1cfa5-#f5d69f-#f5898b-#ef5055'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    appear<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      animation<span class=\"token punctuation\">:</span> <span class=\"token string\">'delayScaleInY'</span><span class=\"token punctuation\">,</span>\n      easing<span class=\"token punctuation\">:</span> <span class=\"token string\">'easeElasticOut'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">delay</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> index <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}}}}}