{"componentChunkName":"component---node-modules-antv-gatsby-theme-antv-0-10-37-antv-gatsby-theme-antv-site-templates-document-tsx","path":"/zh/docs/manual/advanced/geom-and-adjust","result":{"data":{"site":{"siteMetadata":{"title":"G2","githubUrl":"https://github.com/antvis/g2","docs":[{"slug":"manual/getting-started","title":{"zh":"快速开始","en":"Getting Started"},"order":0},{"slug":"manual/tutorial","title":{"zh":"使用教程","en":"Tutorial"},"order":1},{"slug":"manual/advanced","title":{"zh":"高级教程","en":"Advanced"},"order":2},{"slug":"manual/faq","title":{"zh":"G2 常见问题","en":"FAQ"},"order":3}]},"pathPrefix":""},"markdownRemark":{"html":"<h2 id=\"调用语法\"><a href=\"#%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95\" aria-label=\"调用语法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>调用语法</h2>\n<p>G2 默认提供了如下 8 种几何标记和数据调整组合，直接通过如下代码即可调用：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">intervalStack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th align=\"left\">类型</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pointStack</code></td>\n<td align=\"left\">层叠点图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pointJitter</code></td>\n<td align=\"left\">扰动点图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pointDodge</code></td>\n<td align=\"left\">分组点图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">intervalStack</code></td>\n<td align=\"left\">层叠柱状图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">intervalDodge</code></td>\n<td align=\"left\">分组柱状图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">intervalSymmetric</code></td>\n<td align=\"left\">对称柱状图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">areaStack</code></td>\n<td align=\"left\">层叠区域图</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">schemaDodge</code></td>\n<td align=\"left\">分组箱型图</td>\n</tr>\n</tbody>\n</table>\n<p>另外也可以通过如下方式整合几何标记和数据调整方式来自由创建和组合图表，支持多种数据调整方式的组合。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">adjust</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  type<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">'stack'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'symmetric'</span> <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"为什么进行数据调整\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%B0%83%E6%95%B4\" aria-label=\"为什么进行数据调整 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>为什么进行数据调整</h2>\n<p>数据映射到图形时必须进行视觉编码，视觉编码包括几何标记和视觉通道，几何标记对应着多种图表类型，视觉通道定义图形属性。视觉通道中最具区分度的通道是位置（position)，图形的位置在一些情况下会出现重叠：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*lyoNSotXSwwAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*g7xySpkL9FEAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<ul>\n<li>点图经常存在点重叠的情况。上图的点图有 2000 多条记录，大多数点重叠在一起；</li>\n<li>柱状图（interval) 在 x 轴是分类的情况下，同一个分类下有多条记录是也会重叠。上图的柱状图，每个分类下有 7 个柱状图，互相重叠，看不清晰各个分类的数据大小。</li>\n</ul>\n<p>所以我们需要对数据进行调整，使得图形在画布上不互相重叠。G2 中支持以下几种数据调整：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名称</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">stack</td>\n<td align=\"left\">层叠，将同一个分类的数据值累加起来。以层叠柱状图为例，x 轴方向的同一个分类下面的数据，按照顺序，将 y 轴对应的值累加，最终将数据调整的不再重叠。</td>\n</tr>\n<tr>\n<td align=\"left\">jitter</td>\n<td align=\"left\">扰动散开，将数据的位置轻微的调整，使得映射后的图形位置不再重叠。</td>\n</tr>\n<tr>\n<td align=\"left\">dodge</td>\n<td align=\"left\">分组散开，将同一个分类的数据进行分组在一个范围内均匀分布，并排放置。</td>\n</tr>\n<tr>\n<td align=\"left\">symmetric</td>\n<td align=\"left\">对称处理，使得生成的图形居中对齐。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"数据调整类型\"><a href=\"#%E6%95%B0%E6%8D%AE%E8%B0%83%E6%95%B4%E7%B1%BB%E5%9E%8B\" aria-label=\"数据调整类型 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据调整类型</h2>\n<p>下面我们从下面这两个方面对各个数据调整类型进行详解：</p>\n<ul>\n<li>适合的数据类型</li>\n<li>适合的几何标记</li>\n</ul>\n<h3 id=\"stack\"><a href=\"#stack\" aria-label=\"stack permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>stack</h3>\n<h4 id=\"适合的数据类型\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\" aria-label=\"适合的数据类型 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的数据类型</h4>\n<p>层叠数据，适用于分类数据和连续数据，只要 x 轴方向的值相同，就会对 y 轴方向的值进行层叠处理，例如对于该条数据 <code class=\"language-text\">[{a: 1,b: 10},{a:1, b: 12}]</code>，将字段 a 映射至 x 轴，b 映射到 y 轴方向，y 发生层叠处理后：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>生成的图形：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*bIlmQJuAuncAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h4 id=\"适合的几何标记\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0\" aria-label=\"适合的几何标记 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的几何标记</h4>\n<p><code class=\"language-text\">point</code>、<code class=\"language-text\">interval</code>, <code class=\"language-text\">area</code></p>\n<ul>\n<li>层叠的点图</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*IZYVTI5xdN8AAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<ul>\n<li>层叠的柱状图、玫瑰图</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*AezCRZ5cOtIAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<ul>\n<li>饼图，饼图本质上就是数据层叠占满了整个 0-360 度的圆形空间</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*6bCYTaHhw_oAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h3 id=\"jitter\"><a href=\"#jitter\" aria-label=\"jitter permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>jitter</h3>\n<h4 id=\"适合的数据类型-1\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1\" aria-label=\"适合的数据类型 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的数据类型</h4>\n<p>jitter，仅适合于分类数据，只能在同一个分类的范围内散开，这不会改变图形表现的分类值。但是连续数据不能进行散开，连续数据位置一旦变化，图形代表的数据值就会不准确，会带来误导。</p>\n<p>对数据进行 jitter 调整时，需要将分类数据转换成索引值，在索引值 [-0.5, 0.5] 的范围内进行随机分布，jitter 示例：</p>\n<p>数据：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span><span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span><span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>分类转换成数字：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>随机散开数据</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1.4</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>生成的图形：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*MQjZT7vSyDAAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h4 id=\"适合的几何标记-1\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-1\" aria-label=\"适合的几何标记 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的几何标记</h4>\n<p><code class=\"language-text\">point</code></p>\n<ul>\n<li>散开的点图：</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*p2r5SrcdGoAAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*G_2bSKRAGMkAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h3 id=\"dodge\"><a href=\"#dodge\" aria-label=\"dodge permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dodge</h3>\n<h4 id=\"适合的数据类型-2\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2\" aria-label=\"适合的数据类型 2 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的数据类型</h4>\n<p>dodge 是将同一个分类的数据均匀得分布在分类的范围内，形成分组效果，同样不适合连续数据。dodge 跟 jitter 的差别在于：</p>\n<ul>\n<li>dodge 的数据在分类范围内将数据均匀分布；</li>\n<li>如果数据只有一维，y 轴方向无数据，那么 jitter 在整个 y 轴方向随机分布，而 dodge 在 y 轴方向层叠分布。</li>\n</ul>\n<p>数据：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>分类转换成数字：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>均匀分布</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">0.75</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1.25</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token number\">4</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>生成的图形：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*3NciQ68Npy8AAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h4 id=\"适合的几何标记-2\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-2\" aria-label=\"适合的几何标记 2 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的几何标记</h4>\n<p><code class=\"language-text\">point</code> <code class=\"language-text\">interval</code> <code class=\"language-text\">schema</code></p>\n<ul>\n<li>一维点图</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*ho3xRrZG_GIAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<ul>\n<li>二维的柱状图、玫瑰图 (interval)</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*R25cTbsjP5cAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h3 id=\"symmetric\"><a href=\"#symmetric\" aria-label=\"symmetric permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>symmetric</h3>\n<h4 id=\"适合的数据类型-3\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-3\" aria-label=\"适合的数据类型 3 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的数据类型</h4>\n<p>symmetric 将数据沿 y 轴进行对称处理，所以适合处理连续数据。由于对称处理将单个值的数据处理成了有上下限的数值，所以不会引起数据的误解。</p>\n<p>数据：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span><span class=\"token string\">'a3'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span><span class=\"token number\">20</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>对称处理数据，由于 b 的范围是 [0 - 20]，所以所有的数据都将在 0-20 之间对称，计算公式如下：</p>\n<p>offset = (max - min - value)/2;</p>\n<p>调整结果：</p>\n<p>[min + offset, value + offset]</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a1'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span> <span class=\"token string\">'a2'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">7.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12.5</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> a<span class=\"token operator\">:</span><span class=\"token string\">'a3'</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>生成的图形：</p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*ji7iS47NGFYAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<h4 id=\"适合的几何标记-3\"><a href=\"#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-3\" aria-label=\"适合的几何标记 3 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>适合的几何标记</h4>\n<p><code class=\"language-text\">interval</code> <code class=\"language-text\">area</code></p>\n<ul>\n<li>漏斗图：将柱状图调整成对称柱状图，然后再连接柱状图的顶点，即可成为漏斗图</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*Iu_MRqxhRrsAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>\n<ul>\n<li>数据流图：对称的层叠区域图</li>\n</ul>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*uMY8RLc17MsAAAAAAAAAAABkARQnAQ\" alt=\"image | left\"></p>","tableOfContents":"<ul>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E8%B0%83%E7%94%A8%E8%AF%AD%E6%B3%95\">调用语法</a></li>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E8%B0%83%E6%95%B4\">为什么进行数据调整</a></li>\n<li>\n<p><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E6%95%B0%E6%8D%AE%E8%B0%83%E6%95%B4%E7%B1%BB%E5%9E%8B\">数据调整类型</a></p>\n<ul>\n<li>\n<p><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#stack\">stack</a></p>\n<ul>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\">适合的数据类型</a></li>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0\">适合的几何标记</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#jitter\">jitter</a></p>\n<ul>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1\">适合的数据类型</a></li>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-1\">适合的几何标记</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#dodge\">dodge</a></p>\n<ul>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2\">适合的数据类型</a></li>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-2\">适合的几何标记</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#symmetric\">symmetric</a></p>\n<ul>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-3\">适合的数据类型</a></li>\n<li><a href=\"/zh/docs/manual/advanced/geom-and-adjust/#%E9%80%82%E5%90%88%E7%9A%84%E5%87%A0%E4%BD%95%E6%A0%87%E8%AE%B0-3\">适合的几何标记</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/zh/docs/manual/advanced/geom-and-adjust","readingTime":{"text":"3 min read","time":165299.99999999997}},"frontmatter":{"title":"几何标记和数据调整"},"parent":{"relativePath":"manual/advanced/geom-and-adjust.zh.md"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/en/examples/gallery"},"frontmatter":{"title":"Gallery","order":-1}}},{"node":{"fields":{"slug":"/zh/examples/gallery"},"frontmatter":{"title":"所有图表","order":-1}}},{"node":{"fields":{"slug":"/en/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/getting-started"},"frontmatter":{"title":"快速上手","order":0}}},{"node":{"fields":{"slug":"/en/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/zh/docs/api/g2"},"frontmatter":{"title":"G2","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/grammar"},"frontmatter":{"title":"图形语法","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/chart-composition"},"frontmatter":{"title":"G2 图表组成","order":0}}},{"node":{"fields":{"slug":"/zh/examples/relation/relation"},"frontmatter":{"title":"关系图","order":0}}},{"node":{"fields":{"slug":"/en/examples/radar/radar"},"frontmatter":{"title":"Radar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/radar/radar"},"frontmatter":{"title":"雷达图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/point/scatter"},"frontmatter":{"title":"散点图","order":0}}},{"node":{"fields":{"slug":"/en/examples/relation/relation"},"frontmatter":{"title":"Graph","order":0}}},{"node":{"fields":{"slug":"/en/examples/point/scatter"},"frontmatter":{"title":"Scatter Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/pie/basic"},"frontmatter":{"title":"Basic Pie Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/pie/basic"},"frontmatter":{"title":"基础饼图","order":0}}},{"node":{"fields":{"slug":"/en/examples/other/other"},"frontmatter":{"title":"Others","order":0}}},{"node":{"fields":{"slug":"/zh/examples/other/other"},"frontmatter":{"title":"其他图表","order":0}}},{"node":{"fields":{"slug":"/en/examples/map/map"},"frontmatter":{"title":"Map","order":0}}},{"node":{"fields":{"slug":"/zh/examples/map/map"},"frontmatter":{"title":"地图","order":0}}},{"node":{"fields":{"slug":"/en/examples/line/basic"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/line/basic"},"frontmatter":{"title":"基础折线图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/heatmap/heatmap"},"frontmatter":{"title":"热力图","order":0}}},{"node":{"fields":{"slug":"/en/examples/heatmap/heatmap"},"frontmatter":{"title":"Heatmap","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gauge/gauge"},"frontmatter":{"title":"仪表盘","order":0}}},{"node":{"fields":{"slug":"/en/examples/gauge/gauge"},"frontmatter":{"title":"Gauge","order":0}}},{"node":{"fields":{"slug":"/en/examples/funnel/funnel"},"frontmatter":{"title":"Funnel Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/funnel/funnel"},"frontmatter":{"title":"漏斗图","order":0}}},{"node":{"fields":{"slug":"/en/examples/gallery/line"},"frontmatter":{"title":"Line Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/facet/facet"},"frontmatter":{"title":"Facet","order":0}}},{"node":{"fields":{"slug":"/zh/examples/gallery/line"},"frontmatter":{"title":"折线图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/facet/facet"},"frontmatter":{"title":"分面","order":0}}},{"node":{"fields":{"slug":"/en/examples/component/component"},"frontmatter":{"title":"Chart Components","order":0}}},{"node":{"fields":{"slug":"/zh/examples/component/component"},"frontmatter":{"title":"图表组件","order":0}}},{"node":{"fields":{"slug":"/en/examples/candlestick/candlestick"},"frontmatter":{"title":"K Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/candlestick/candlestick"},"frontmatter":{"title":"烛形图","order":0}}},{"node":{"fields":{"slug":"/en/examples/column/basic"},"frontmatter":{"title":"Basic Column Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/column/basic"},"frontmatter":{"title":"基础柱状图","order":0}}},{"node":{"fields":{"slug":"/zh/examples/box/box"},"frontmatter":{"title":"箱型图","order":0}}},{"node":{"fields":{"slug":"/en/examples/box/box"},"frontmatter":{"title":"Box Chart","order":0}}},{"node":{"fields":{"slug":"/en/examples/bar/basic"},"frontmatter":{"title":"Basic Bar Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/bar/basic"},"frontmatter":{"title":"基础条形图","order":0}}},{"node":{"fields":{"slug":"/en/examples/area/basic"},"frontmatter":{"title":"Area Chart","order":0}}},{"node":{"fields":{"slug":"/zh/examples/area/basic"},"frontmatter":{"title":"面积图","order":0}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-flow"},"frontmatter":{"title":"G2 的数据处理流程","order":1}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/creating-chart"},"frontmatter":{"title":"创建图表","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/zh/docs/api/chart"},"frontmatter":{"title":"Chart 图表","order":1}}},{"node":{"fields":{"slug":"/en/examples/pie/donut"},"frontmatter":{"title":"Donut Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/pie/donut"},"frontmatter":{"title":"环图","order":1}}},{"node":{"fields":{"slug":"/en/examples/line/double"},"frontmatter":{"title":"Double Line Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/line/double"},"frontmatter":{"title":"双折线图","order":1}}},{"node":{"fields":{"slug":"/en/examples/gallery/column"},"frontmatter":{"title":"Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/gallery/column"},"frontmatter":{"title":"柱状图","order":1}}},{"node":{"fields":{"slug":"/zh/examples/column/dodge"},"frontmatter":{"title":"分组柱状图","order":1}}},{"node":{"fields":{"slug":"/en/examples/column/dodge"},"frontmatter":{"title":"Grouped Column Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/bar/dodge"},"frontmatter":{"title":"分组条形图","order":1}}},{"node":{"fields":{"slug":"/en/examples/bar/dodge"},"frontmatter":{"title":"Grouped Bar Chart","order":1}}},{"node":{"fields":{"slug":"/en/examples/area/stacked"},"frontmatter":{"title":"Stacked Area Chart","order":1}}},{"node":{"fields":{"slug":"/zh/examples/area/stacked"},"frontmatter":{"title":"堆叠面积图","order":1}}},{"node":{"fields":{"slug":"/en/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/zh/docs/api/view"},"frontmatter":{"title":"View 视图","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/data-type-and-scale"},"frontmatter":{"title":"数据类型与度量","order":2}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2}}},{"node":{"fields":{"slug":"/en/examples/pie/rose"},"frontmatter":{"title":"Nightingale Rose Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/pie/rose"},"frontmatter":{"title":"南丁格尔玫瑰图","order":2}}},{"node":{"fields":{"slug":"/en/examples/line/multiple"},"frontmatter":{"title":"multiple line chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/line/multiple"},"frontmatter":{"title":"多折线图","order":2}}},{"node":{"fields":{"slug":"/en/examples/gallery/bar"},"frontmatter":{"title":"Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/gallery/bar"},"frontmatter":{"title":"条形图","order":2}}},{"node":{"fields":{"slug":"/zh/examples/column/stack"},"frontmatter":{"title":"堆叠柱状图","order":2}}},{"node":{"fields":{"slug":"/en/examples/column/stack"},"frontmatter":{"title":"Stacked Column Chart","order":2}}},{"node":{"fields":{"slug":"/en/examples/bar/stack"},"frontmatter":{"title":"Stacked Bar Chart","order":2}}},{"node":{"fields":{"slug":"/zh/examples/bar/stack"},"frontmatter":{"title":"堆叠条形图","order":2}}},{"node":{"fields":{"slug":"/zh/examples/area/range"},"frontmatter":{"title":"区间面积图","order":2}}},{"node":{"fields":{"slug":"/en/examples/area/range"},"frontmatter":{"title":"Range Area Chart","order":2}}},{"node":{"fields":{"slug":"/en/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/zh/docs/api/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/deep-into-coord"},"frontmatter":{"title":"坐标系详解","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3}}},{"node":{"fields":{"slug":"/zh/examples/pie/nested"},"frontmatter":{"title":"嵌套饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/pie/nested"},"frontmatter":{"title":"Nested Pie Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/line/step"},"frontmatter":{"title":"阶梯折线图","order":3}}},{"node":{"fields":{"slug":"/en/examples/line/step"},"frontmatter":{"title":"Step Line Chart","order":3}}},{"node":{"fields":{"slug":"/zh/examples/gallery/pie"},"frontmatter":{"title":"饼图","order":3}}},{"node":{"fields":{"slug":"/en/examples/gallery/pie"},"frontmatter":{"title":"Pie Chart","order":3}}},{"node":{"fields":{"slug":"/en/examples/column/histogram"},"frontmatter":{"title":"Histogram","order":3}}},{"node":{"fields":{"slug":"/zh/examples/column/histogram"},"frontmatter":{"title":"直方图","order":3}}},{"node":{"fields":{"slug":"/en/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/faq"},"frontmatter":{"title":"G2 常见问题","order":4}}},{"node":{"fields":{"slug":"/zh/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/docs/api/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/geom-and-adjust"},"frontmatter":{"title":"几何标记和数据调整","order":4}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale"},"frontmatter":{"title":"Scale 度量","order":4}}},{"node":{"fields":{"slug":"/en/examples/gallery/area"},"frontmatter":{"title":"Area Chart","order":4}}},{"node":{"fields":{"slug":"/zh/examples/gallery/area"},"frontmatter":{"title":"面积图","order":4}}},{"node":{"fields":{"slug":"/en/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/zh/docs/api/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/advanced/chart-type"},"frontmatter":{"title":"图表类型","order":5}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/scale-def"},"frontmatter":{"title":"什么是列定义","order":5}}},{"node":{"fields":{"slug":"/en/examples/gallery/gauge"},"frontmatter":{"title":"Gauge","order":5}}},{"node":{"fields":{"slug":"/zh/examples/gallery/gauge"},"frontmatter":{"title":"仪表盘","order":5}}},{"node":{"fields":{"slug":"/en/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/zh/docs/api/animate"},"frontmatter":{"title":"Animate 动画","order":6}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/geometry"},"frontmatter":{"title":"Geometry 几何标记","order":6}}},{"node":{"fields":{"slug":"/en/examples/gallery/facet"},"frontmatter":{"title":"Facet","order":6}}},{"node":{"fields":{"slug":"/zh/examples/gallery/facet"},"frontmatter":{"title":"分面","order":6}}},{"node":{"fields":{"slug":"/en/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/zh/docs/api/shape"},"frontmatter":{"title":"自定义 Shape","order":7}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/attribute"},"frontmatter":{"title":"Attribute 图形属性","order":7}}},{"node":{"fields":{"slug":"/en/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/zh/docs/api/interaction"},"frontmatter":{"title":"Interaction 交互","order":8}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/coordinate"},"frontmatter":{"title":"Coordinate 坐标系","order":8}}},{"node":{"fields":{"slug":"/zh/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/en/docs/api/graphics"},"frontmatter":{"title":"Graphic 图形相关","order":9}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/axis"},"frontmatter":{"title":"Axis 坐标轴","order":9}}},{"node":{"fields":{"slug":"/en/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/zh/docs/api/options"},"frontmatter":{"title":"Options 配置项声明","order":10}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/legend"},"frontmatter":{"title":"Legend 图例","order":10}}},{"node":{"fields":{"slug":"/en/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/zh/docs/api/slider"},"frontmatter":{"title":"Slider 滑块插件","order":11}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/tooltip"},"frontmatter":{"title":"Tooltip 提示信息","order":11}}},{"node":{"fields":{"slug":"/en/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/zh/docs/api/data-set"},"frontmatter":{"title":"DataSet","order":12}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/guide"},"frontmatter":{"title":"Guide 辅助元素","order":12}}},{"node":{"fields":{"slug":"/en/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/zh/docs/api/connector"},"frontmatter":{"title":"Connector 数据接入","order":13}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/facet"},"frontmatter":{"title":"Facet 分面","order":13}}},{"node":{"fields":{"slug":"/en/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/zh/docs/api/transform"},"frontmatter":{"title":"Transform 数据转换","order":14}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/theme"},"frontmatter":{"title":"Theme 图表皮肤","order":14}}},{"node":{"fields":{"slug":"/en/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/zh/docs/api/global"},"frontmatter":{"title":"Global 配置项","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/label"},"frontmatter":{"title":"Label 图形文本","order":15}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/event"},"frontmatter":{"title":"图表事件","order":16}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/interaction"},"frontmatter":{"title":"图表交互","order":17}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/slider"},"frontmatter":{"title":"Slider 滑块插件","order":18}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/update-data"},"frontmatter":{"title":"数据异步加载与动态更新","order":19}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/shape"},"frontmatter":{"title":"自定义 Shape","order":20}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/animate"},"frontmatter":{"title":"自定义动画","order":21}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/view"},"frontmatter":{"title":"创建 View","order":22}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/renderers"},"frontmatter":{"title":"选择 Canvas 还是 SVG","order":23}}},{"node":{"fields":{"slug":"/en/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}},{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/g2-v3-changes"},"frontmatter":{"title":"G2 3.0 升级指引","order":24}}}]}},"pageContext":{"prev":{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/loading-data"},"frontmatter":{"title":"装载数据","order":2},"html":"<h2 id=\"如何装载数据\"><a href=\"#%E5%A6%82%E4%BD%95%E8%A3%85%E8%BD%BD%E6%95%B0%E6%8D%AE\" aria-label=\"如何装载数据 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何装载数据</h2>\n<p>chart 对象支持两种数据载入的方式：</p>\n<ul>\n<li>方式 1：<code class=\"language-text\">data</code> 属性传入</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> chart <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token operator\">:</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>方式 2：调用 <code class=\"language-text\">chart.source(data)</code> 方法，每个字段的<a href=\"/zh/docs/manual/tutorial/scale-def\">列定义</a>也可以在这里传入</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'cat'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  y<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    min<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"支持的数据格式\"><a href=\"#%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F\" aria-label=\"支持的数据格式 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>支持的数据格式</h2>\n<p>G2 支持两种格式的数据源：</p>\n<ol>\n<li>JSON 数组</li>\n<li><a href=\"/zh/docs/manual/tutorial/data-set\">DataView 对象</a></li>\n</ol>\n<h3 id=\"json-数组\"><a href=\"#json-%E6%95%B0%E7%BB%84\" aria-label=\"json 数组 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON 数组</h3>\n<p>G2 接收的数据格式非常简单：标准的 JSON 数组，其中每个数组元素是一个标准的 JSON 对象：</p>\n<p>Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> gender<span class=\"token operator\">:</span> <span class=\"token string\">'男'</span><span class=\"token punctuation\">,</span> count<span class=\"token operator\">:</span> <span class=\"token number\">40</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> gender<span class=\"token operator\">:</span> <span class=\"token string\">'女'</span><span class=\"token punctuation\">,</span> count<span class=\"token operator\">:</span> <span class=\"token number\">30</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"dataview-对象\"><a href=\"#dataview-%E5%AF%B9%E8%B1%A1\" aria-label=\"dataview 对象 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataView 对象</h3>\n<p>详见 <a href=\"/zh/docs/manual/tutorial/data-set\">DataSet 教程</a>。</p>\n<h2 id=\"更新数据\"><a href=\"#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE\" aria-label=\"更新数据 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新数据</h2>\n<p>G2 更新数据的方式主要有三种：</p>\n<ul>\n<li>仅仅是更新图表的数据</li>\n<li>清理所有，重新绘制</li>\n<li>使用 DataView 时的更新</li>\n</ul>\n<h3 id=\"更新数据-1\"><a href=\"#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE-1\" aria-label=\"更新数据 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更新数据</h3>\n<p>如果需要马上更新图表，使用 <code class=\"language-text\">chart.changeData(data)</code> 即可</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">changeData</span><span class=\"token punctuation\">(</span>newData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>view 也支持 <code class=\"language-text\">view.changeData(data)</code></li>\n</ul>\n<p>如果仅仅是更新数据，而不需要马上更新图表，可以调用 <code class=\"language-text\">chart.source(data)</code>，需要更新图表时调用 <code class=\"language-text\">chart.repaint()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>newData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">guide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// 清理guide</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">repaint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"清理图形语法\"><a href=\"#%E6%B8%85%E7%90%86%E5%9B%BE%E5%BD%A2%E8%AF%AD%E6%B3%95\" aria-label=\"清理图形语法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>清理图形语法</h3>\n<p>更新数据时还可以清除图表上的所有元素，重新定义图形语法，重新绘制</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chart<span class=\"token punctuation\">.</span><span class=\"token function\">line</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 清理所有</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>newData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 重新加载数据</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x*y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'z'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"使用-dataview--更新\"><a href=\"#%E4%BD%BF%E7%94%A8-dataview--%E6%9B%B4%E6%96%B0\" aria-label=\"使用 dataview  更新 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用 DataView  更新</h3>\n<p>由于 <code class=\"language-text\">DataSet</code> 支持状态量 <code class=\"language-text\">state</code>，一旦更改状态量，图表即一起刷新，详情查看<a href=\"/zh/docs/manual/tutorial/data-set\"> DataSet 教程</a>。</p>"}},"next":{"node":{"fields":{"slug":"/zh/docs/manual/tutorial/data-set"},"frontmatter":{"title":"DataSet","order":3},"html":"<p>自 G2 3.0 版本开始，原先内置的数据处理模块 frame 从 G2 包中抽离出来，独立成为 DataSet 包。DataSet 的目标是为数据可视化场景提供状态驱动（state driven）的、丰富而强大的数据处理能力。</p>\n<h2 id=\"术语表\"><a href=\"#%E6%9C%AF%E8%AF%AD%E8%A1%A8\" aria-label=\"术语表 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>术语表</h2>\n<table>\n<thead>\n<tr>\n<th>术语</th>\n<th>英文</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>数据集</td>\n<td>DataSet</td>\n<td>一组数据集合</td>\n</tr>\n<tr>\n<td>数据视图</td>\n<td>DataView</td>\n<td>单个数据视图，目前有普通二维数据（类似一张数据库表）、树形数据、图数据和地理信息数据几种类型</td>\n</tr>\n<tr>\n<td>状态量</td>\n<td>state</td>\n<td>数据集内部流转的控制数据状态的变量</td>\n</tr>\n<tr>\n<td>变换</td>\n<td>Transform</td>\n<td>数据变换函数，数据视图做数据处理时使用，包括图布局、数据补全、数据过滤等等</td>\n</tr>\n<tr>\n<td>连接器</td>\n<td>Connector</td>\n<td>数据接入函数，用于把某种数据源（譬如 csv）载入到某个数据视图上</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"简介\"><a href=\"#%E7%AE%80%E4%BB%8B\" aria-label=\"简介 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>简介</h2>\n<p>在 G2 的 1.x 和 2.x 版本里，统计函数和数据处理是和图形语法混合在一起的。这一方面导致了不必要的隐喻，造成额外的理解成本，另一方面把数据处理模块（ Frame 和 Stat ）内置也限制了 G2 数据处理能力的进一步发展。</p>\n<p>为追求更极致的体验，我们把数据处理部分从 G2 中完全抽离出来，对数据处理本身进行了进一步的抽象，扩展和优化，从而实现了一个独立的数据处理模块 DataSet。</p>\n<p>首先我们把数据处理分为两个大的步骤：数据连接（Connector）和数据转换（Transform）。Connector 负责导入和归一化数据（譬如导入 CSV 数据，导入 GeoJSON 数据等），Transform 负责进行各种数据转换操作（譬如图布局、数据统计、数据补全等）。通过这样的分层，支持了前端社区非常全面的数据处理相关的算法和模块；其次，我们在单个数据视图（DataView）的基础上增加了数据集（DataSet）的概念，通过统一的 DataSet 管理，实现了各个数据视图之间的状态同步和交互。整个数据处理模块的架构如下图。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2018/svg/100996/1539836119210-b5db5f9c-c1fa-46bb-9c0f-8126c08d28ab.svg#width=747\"></p>\n<p>DataSet 支持状态量（State）可以实现多个图表之间的联动</p>\n<h2 id=\"安装\"><a href=\"#%E5%AE%89%E8%A3%85\" aria-label=\"安装 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装</h2>\n<h3 id=\"浏览器引入\"><a href=\"#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E5%85%A5\" aria-label=\"浏览器引入 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>浏览器引入</h3>\n<p>可以通过<code class=\"language-text\">&lt;script&gt;</code>标签引入在线资源或者本地脚本。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 引入在线资源 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/@antv/data-set<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 引入本地脚本 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>./data-set.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>这样，就可以在后续脚本中得到全局变量 DataSet。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/@antv/data-set<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">const</span> dv <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSet<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"通过-npm-安装\"><a href=\"#%E9%80%9A%E8%BF%87-npm-%E5%AE%89%E8%A3%85\" aria-label=\"通过 npm 安装 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通过 npm 安装</h3>\n<p><a href=\"https://www.npmjs.com/package/@antv/data-set\" target=\"_self\" rel=\"nofollow\"><img src=\"https://img.shields.io/npm/v/@antv/data-set.svg?style=flat-square#width=\"></a></p>\n<p>我们提供了 DataSet 的 npm 包，可以通过下面的命令进行安装。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @antv/data-set --save</code></pre></div>\n<p>安装后即可使用 <code class=\"language-text\">import</code> 或者 <code class=\"language-text\">require</code> 进行引用。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> View <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/data-set'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dv <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2 id=\"功能介绍\"><a href=\"#%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D\" aria-label=\"功能介绍 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>功能介绍</h2>\n<p>DataSet 主要完成了以下功能：</p>\n<ul>\n<li>源数据的解析，将 CSV, DSV, GeoJSON 转成标准的JSON，查看 <a href=\"/zh/docs/api/connector\">Connector</a></li>\n<li>加工数据，包括 filter, map, fold(补数据) 等操作，查看 <a href=\"/zh/docs/api/transform\">Transform</a></li>\n<li>统计函数，汇总统计、百分比、封箱 等统计函数，查看 <a href=\"/zh/docs/api/transform\">Transform</a></li>\n<li>特殊数据处理，包括 地理数据、矩形树图、桑基图、文字云 的数据处理，查看 <a href=\"/zh/docs/api/transform\">Transform</a></li>\n</ul>\n<h2 id=\"使用示例\"><a href=\"#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B\" aria-label=\"使用示例 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用示例</h2>\n<h3 id=\"单独使用-dataview\"><a href=\"#%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8-dataview\" aria-label=\"单独使用 dataview permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>单独使用 DataView</h3>\n<p>如果仅仅是对数据进行加工，不需要图表联动</p>\n<h3 id=\"状态量\"><a href=\"#%E7%8A%B6%E6%80%81%E9%87%8F\" aria-label=\"状态量 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>状态量</h3>\n<p>在 G2 3.0 中使用 DataSet 的状态量 (State) 可以很容易的实现图表的联动，步骤如下：</p>\n<ol>\n<li>创建 DataSet 对象，指定状态量</li>\n<li>创建 DataView 对象，在 transform 中使用状态量</li>\n<li>创建图表，引用前面创建 DataView</li>\n<li>改变状态量，所有 DataView 更新</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// step1 创建 dataset 指定状态量</span>\n<span class=\"token keyword\">const</span> ds <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    year<span class=\"token operator\">:</span> <span class=\"token string\">'2010'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// step2 创建 DataView</span>\n<span class=\"token keyword\">const</span> dv <span class=\"token operator\">=</span> ds<span class=\"token punctuation\">.</span><span class=\"token function\">createView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndv<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  type<span class=\"token operator\">:</span> <span class=\"token string\">'filter'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">row</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> row<span class=\"token punctuation\">.</span>year <span class=\"token operator\">===</span> ds<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>year<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// step3 引用 DataView</span>\nchart<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>dv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// step4 更新状态量</span>\nds<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2012'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code class=\"language-text\">注意</code>：</p>\n<ul>\n<li>在 DataSet 创建了状态量后，默认会影响其管理的所有的 DataView， 可以通过 <code class=\"language-text\">watchingStates</code> 明确的指定受那些状态量影响，设置为空数组时不受状态量的影响。</li>\n<li>所有引用了 DataSet 管理的 DataView 的图表都会受自动刷新，不需要手工刷新。</li>\n</ul>\n<h3 id=\"图表联动示例\"><a href=\"#%E5%9B%BE%E8%A1%A8%E8%81%94%E5%8A%A8%E7%A4%BA%E4%BE%8B\" aria-label=\"图表联动示例 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>图表联动示例</h3>\n<p>假设我们有一个 CSV 文件 <code class=\"language-text\">population-by-age.csv</code>，里面的数据是美国各个州不同年龄段的人口数量，文件内容如下：</p>\n<table>\n<thead>\n<tr>\n<th>State</th>\n<th>小于 5 岁</th>\n<th>5 至 13 岁</th>\n<th>14 至 17 岁</th>\n<th>18 至 24 岁</th>\n<th>25 至 44 岁</th>\n<th>45 至 64 岁</th>\n<th>65 岁及以上</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>WY</td>\n<td>38253</td>\n<td>60890</td>\n<td>29314</td>\n<td>53980</td>\n<td>137338</td>\n<td>147279</td>\n<td>65614</td>\n</tr>\n<tr>\n<td>DC</td>\n<td>36352</td>\n<td>50439</td>\n<td>25225</td>\n<td>75569</td>\n<td>193557</td>\n<td>140043</td>\n<td>70648</td>\n</tr>\n<tr>\n<td>VT</td>\n<td>32635</td>\n<td>62538</td>\n<td>33757</td>\n<td>61679</td>\n<td>155419</td>\n<td>188593</td>\n<td>86649</td>\n</tr>\n<tr>\n<td>ND</td>\n<td>41896</td>\n<td>67358</td>\n<td>33794</td>\n<td>82629</td>\n<td>154913</td>\n<td>166615</td>\n<td>94276</td>\n</tr>\n<tr>\n<td>AK</td>\n<td>52083</td>\n<td>85640</td>\n<td>42153</td>\n<td>74257</td>\n<td>198724</td>\n<td>183159</td>\n<td>50277</td>\n</tr>\n<tr>\n<td>SD</td>\n<td>58566</td>\n<td>94438</td>\n<td>45305</td>\n<td>82869</td>\n<td>196738</td>\n<td>210178</td>\n<td>116100</td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>我们希望把 CSV 文件的内容载入，画一个以州为横轴，人口数量为纵轴的层叠柱状图，并且在查看某个柱子的时候，希望能看到对应某个州的对比各个年龄段人口数量的饼图。下面我们来看看应该怎么画？</p>\n<blockquote>\n<p>Step1：创建数据集 DataSet 实例，管理 state 状态量</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ds <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    currentState<span class=\"token operator\">:</span> <span class=\"token string\">'WY'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p>Step2：为层叠柱状图创建数据视图 View 实例，装载数据</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/*\n * 如果不需要用到状态管理之类的功能，也可以不基于 DataSet 实例创建数据视图\n * 直接用 const dv = new DataSet.View();\n * 本例需要用状态量在不同的数据视图实例之间通信，所以需要有一个 DataSet 实例管理状态量\n */</span>\n$<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/assets/data/population-by-age.csv'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> dvForAll <span class=\"token operator\">=</span> ds\n    <span class=\"token punctuation\">.</span><span class=\"token function\">createView</span><span class=\"token punctuation\">(</span><span class=\"token string\">'populationByAge'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      watchingStates<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 用空数组，使得这个实例不监听 state 变化</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 在 DataSet 实例下创建名为 populationByAge 的数据视图</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'csv'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 使用 CSV 类型的 Connector 装载 data</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p>Step3：合并人口数量列（新增\"年龄段\"和\"人口\"字段，把各个年龄段的人口数量列数据合并到这两列上）</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">dvForAll<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  type<span class=\"token operator\">:</span> <span class=\"token string\">'fold'</span><span class=\"token punctuation\">,</span>\n  fields<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'小于5岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'5至13岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'14至17岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'18至24岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'25至44岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'45至64岁'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'65岁及以上'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  key<span class=\"token operator\">:</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span>\n  value<span class=\"token operator\">:</span> <span class=\"token string\">'population'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p>Step4：为饼图创建数据视图实例，继承上一个数据视图的数据，通过状态量 currentState 过滤数据、统计不同年龄段人口占比</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> dvForOneState <span class=\"token operator\">=</span> ds<span class=\"token punctuation\">.</span><span class=\"token function\">createView</span><span class=\"token punctuation\">(</span><span class=\"token string\">'populationOfOneState'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>dvForAll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 从全量数据继承，写法也可以是 .source('populationByAge')</span>\n\ndvForOneState\n  <span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 过滤数据</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'filter'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">row</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> row<span class=\"token punctuation\">.</span>state <span class=\"token operator\">===</span> ds<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>currentState<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'percent'</span><span class=\"token punctuation\">,</span>\n    field<span class=\"token operator\">:</span> <span class=\"token string\">'population'</span><span class=\"token punctuation\">,</span>\n    dimension<span class=\"token operator\">:</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">as</span><span class=\"token operator\">:</span> <span class=\"token string\">'percent'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p>Step5：最后使用 G2 绘图、绑定事件</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> c1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>dvForAll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">legend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  position<span class=\"token operator\">:</span> <span class=\"token string\">'top'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">axis</span><span class=\"token punctuation\">(</span><span class=\"token string\">'population'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  label<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">formatter</span><span class=\"token operator\">:</span> <span class=\"token parameter\">val</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> val <span class=\"token operator\">/</span> <span class=\"token number\">1000000</span> <span class=\"token operator\">+</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">intervalStack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'state*population'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    mode<span class=\"token operator\">:</span> <span class=\"token string\">'single'</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      stroke<span class=\"token operator\">:</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>\n      strokeWidth<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tooltip:change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">evt</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> evt<span class=\"token punctuation\">.</span>items <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ds<span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'currentState'</span><span class=\"token punctuation\">,</span> items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> c2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">G2<span class=\"token punctuation\">.</span>Chart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token string\">'c2'</span><span class=\"token punctuation\">,</span>\n  forceFit<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n  padding<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc2<span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>dvForOneState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc2<span class=\"token punctuation\">.</span><span class=\"token function\">coord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theta'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  radius<span class=\"token operator\">:</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置饼图的大小</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc2<span class=\"token punctuation\">.</span><span class=\"token function\">legend</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc2<span class=\"token punctuation\">.</span><span class=\"token function\">intervalStack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token string\">'percent'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">label</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age*percent'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">age<span class=\"token punctuation\">,</span> percent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    percent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>percent <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'%'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> age <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> percent<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nc2<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<blockquote>\n<p>效果：</p>\n</blockquote>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*LaQ6SbVrOU4AAAAAAAAAAABkARQnAQ\"></p>\n<p><img src=\"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*YL8WSIlK9HkAAAAAAAAAAABkARQnAQ\"></p>"}}}}}